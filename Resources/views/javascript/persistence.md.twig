bsw.configure({
    data: {
        persistenceForm: null,
        persistenceFormat: {{ persistence.formatJson|raw }},
        persistenceFileListKeyCollect: {{ persistence.fileListKeyCollectJson|raw }},
        persistenceUploadTipsCollect: {{ persistence.uploadTipsCollectJson|raw }},
        persistenceFieldShapeNow: {},
        persistenceFieldShapeCollect: {{ persistence.fieldShapeCollectJson|raw }},
        persistenceTransferKeysCollect: {{ persistence.transferKeysCollectJson|raw }},
    },
    method: {
        persistenceSubmit(e) {
            this.submitFormAction(e, 'persistenceForm', 'persistenceFormat');
        },
        persistenceTransferChange(targetKeys, direction, moveKeys, field) {
            this.persistenceTransferKeysCollect[field].target = targetKeys;
        },
    },
    logic: {
        persistenceInit(v) {
            v.persistenceForm = v.$form.createForm(v);
            v.$nextTick(function () {
                bsw.initCkEditor();
            });
            v.$nextTick(function () {
                for (let field in v.persistenceFieldShapeCollect) {
                    if (!v.persistenceFieldShapeCollect.hasOwnProperty(field)) {
                        continue;
                    }
                    let value = v.persistenceForm.getFieldValue(field);
                    v.persistenceForm.setFieldsValue({[field]: value}); // fixed bug
                    v.switchFieldShapeWithSelect(value, {}, field);
                }
            });
        }
    }
});