bsw.configure({
    data: {
        persistenceForm: null,
        persistenceFormat: {{ persistence.formatJson|raw }},
        persistenceUploadField: null,
        persistenceFileListKeyCollect: {{ persistence.fileListKeyCollectJson|raw }},
        persistenceUploadTipsCollect: {{ persistence.uploadTipsCollectJson|raw }},
        persistenceSwitchField: null,
        persistenceFieldShapeNow: {},
        persistenceFieldShapeCollect: {{ persistence.fieldShapeCollectJson|raw }},
    },
    method: {
        persistenceSubmit(e) {
            this.submitFormAction(e, 'persistenceForm', 'persistenceFormat');
        }
    },
    logic: {
        persistenceInit(v) {
            v.persistenceForm = v.$form.createForm(v);
            v.$nextTick(function () {
                bsw.initCkEditor();
            });
            v.$nextTick(function () {
                for (let field in v.persistenceFieldShapeCollect) {
                    if (!v.persistenceFieldShapeCollect.hasOwnProperty(field)) {
                        continue;
                    }
                    v.persistenceSwitchField = field;
                    let value = v.persistenceForm.getFieldValue(v.persistenceSwitchField);
                    v.persistenceForm.setFieldsValue({[v.persistenceSwitchField]: value});
                    v.switchFieldShapeWithSelect(value);
                }
            });
        }
    }
});